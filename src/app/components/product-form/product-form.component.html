<div class="cuadro">
  <h2>Agregar producto</h2>

  <!-- FOTO -->
  <div class="foto">
    <div class="fotobox" [class.has-image]="fotoUrl" (click)="seleccionarFoto()">
      <ng-container *ngIf="!fotoUrl; else imagenCargada">
        <span>+ Agregar foto</span>
      </ng-container>

      <ng-template #imagenCargada>
        <img [src]="fotoUrl" alt="Vista previa" class="preview" />
      </ng-template>
    </div>

    <div class="fotob">
      <button type="button" class="btn1" (click)="seleccionarFoto()">+ Imagen</button>
      <button type="button" class="btn2" (click)="eliminarFoto()" [disabled]="!fotoUrl">
        Eliminar
      </button>
    </div>

    <input type="file" #inputFoto accept="image/*" (change)="cargarFoto($event)" hidden />
  </div>

  <p style="color:#3b82f6; margin-top:0.5rem;">{{ mensaje }}</p>

  <!-- FORMULARIO -->
  <form #formProducto="ngForm" (ngSubmit)="agregarProducto(formProducto)">
    
    <!-- Categoría -->
    <div class="txt">
      <label for="categoria">Categoría</label>
      <select id="categoria" name="categoria" required [(ngModel)]="categoria">
        <option value="">Seleccionar</option>
        <option value="1">Pizza</option>
        <option value="2">Hamburguesa</option>
      </select>
    </div>

    <!-- Código -->
    <div class="txt">
      <label for="codigo">Código de barras</label>
      <input id="codigo" name="codigo" type="text" required [(ngModel)]="codigo" />
    </div>

    <!-- Nombre -->
    <div class="txt">
      <label for="nombre">Nombre del producto</label>
      <input id="nombre" name="nombre" type="text" required [(ngModel)]="nombre" />
    </div>

    <!-- Descripción -->
    <div class="txt">
      <label for="descripcion">Descripción</label>
      <textarea id="descripcion" name="descripcion" [(ngModel)]="descripcion"></textarea>
    </div>

    <!-- Precio -->
    <div class="txt">
      <label for="precio">Precio</label>
      <div class="input-wrapper">
        <span class="currency">S/</span>
        <input
          id="precio"
          name="precio"
          type="number"
          min="0"
          required
          [(ngModel)]="precio"
        />
      </div>
    </div>

    <!-- Stock -->
    <div class="txt">
      <label for="stock">Stock inicial</label>
      <input
        id="stock"
        name="stock"
        type="number"
        min="0"
        required
        [(ngModel)]="stock"
      />
    </div>

    <button type="submit" class="btn1 full">Agregar producto</button>
  </form>
</div>
